<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase_form</title>
    <link rel="stylesheet" href="form1.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <header>
        <nav>
            <div class="logo">
                <h2>Orsova</h2>
            </div>
            <div class="nav-links" id="navLinks">
                <i class="fa-solid fa-xmark" onclick="hideMenu()"></i>
                <ul>
                    <li><a href="index.html">HOME</a></li>
                    <li><a href="Bestfood.html">Bestfood</a></li>
                    <li><a href="Landmarks.html">Landmarks</a></li>
                    <li><a href="Travel.html">Travel</a></li>
                    <li><a href="Sport.html">Sport</a></li>
                    <li><a href="FORM.html">Formular Inscriere</a></li>
                </ul>
            </div>
            <i class="fa-solid fa-bars" onclick="showMenu()"></i>
        </nav>
    </header>

    <!-- Container pentru alinierea celor două elemente -->
    <div class="form-container">
        <!-- Promo box în stânga -->
        <div class="promo-box">
            <h2>De ce să te înscrii la canotaj?</h2>
            <p>
                Canotajul este un sport complet care îți dezvoltă forța, rezistența și coordonarea.
                Este o activitate în aer liber care te conectează cu natura și îți oferă un sentiment de libertate.
                Înscriindu-te, vei face parte dintr-o comunitate activă și vei avea ocazia să participi la competiții și evenimente.
                În plus, canotajul ajută la reducerea stresului și îmbunătățește sănătatea ta mentală și fizică.
                Hai să descoperi această aventură pe apă!
            </p>
        </div>

        <!-- Formular în dreapta -->
        <div class="box">
            <div class="form">
                <h2>ÎNSCRIE-TE</h2>
                <form>
                    <div class="inputbox">
                        <input type="text" id="name" required>
                        <span>Nume*</span>
                    </div>
                    
                    <div class="inputbox">
                        <input type="text" id="firstname" required>
                        <span>Prenume*</span>
                    </div>
                    
                    <div class="inputbox">
                        <input type="email" id="email" required>
                        <span>E-mail</span>
                    </div>
                    
                    <div class="inputbox">
                        <input type="tel" id="Phone" required>
                        <span>Telefon</span>
                    </div>
                    
                    <div class="inputbox">
                        <input type="text" id="username" required>
                        <span>Username*</span>
                    </div>
                    
                    <input type="submit" value="Înscrie-te" class="sub" id="submit">
                </form>
            </div>
        </div>
    </div>
    
    <script>
        function showMenu() {
            var navLinks = document.getElementById("navLinks");
            navLinks.style.right = "0";
        }
        
        function hideMenu() {
            var navLinks = document.getElementById("navLinks");
            navLinks.style.right = "-200px";
        }
    </script>
    
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";
        
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "complete ",
          authDomain: "site-orsova01.firebaseapp.com",
          projectId: "site-orsova01",
          storageBucket: "site-orsova01.firebasestorage.app",
          messagingSenderId: "669651114930",
          appId: "1:669651114930:web:21c6e5132f5eb5c33a62ab"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        
        // get ref to database service 
        const db = getDatabase(app);
        
        //emailf
        function validateEmail(email) {
            var re = /\S+@\S+\.\S+/;
            return re.test(email);
        }
        
        //phonevali
        function validatePhone(phone) {
            const re = /^\d{1,10}$/;
            return re.test(phone);
        }
        
        //sa nu fie gol 
        function validateName(text) {
            const re = /^[a-zA-ZăîâșțĂÎÂȘȚ ]{2,}$/;
            return re.test(text);
        }

        // Validare username – doar litere și cifre
        function validateUsername(username) {
            const re = /^[a-zA-Z0-9_\-\s]+$/;
            return re.test(username);
        }

        document.getElementById("submit").addEventListener('click', function(e) {
            e.preventDefault(); // Previne comportamentul implicit de submit al formularului
            
            let em = document.getElementById("email").value;
            if (!validateEmail(em)) {
                alert("Email invalid");
                return;
            }
                 
            //phone validation 
            let ph = document.getElementById("Phone").value;
            if (!validatePhone(ph)) {
                alert("Telefon invalid");
                return;
            }
            
            //numele,prenume,user
            let name = document.getElementById("name").value;
            if (!validateName(name)) {
                alert("Numele nu este valid");
                return;
            }
            
            let firstname = document.getElementById("firstname").value;
            if (!validateName(firstname)) {
                alert("Prenumele nu este valid");
                return;
            }
            
            let user = document.getElementById("username").value;
            if (!validateUsername(user)) {
                alert("Username invalid");
                return;
            }
    
            set(ref(db, 'user/' + document.getElementById("username").value), {
                name: name,
                firstname: firstname,
                email: em,
                PhoneNumber: ph,
                username: user
            });
            
            alert("Înregistrare reușită!");
        });
    </script>
</body>
</html>
